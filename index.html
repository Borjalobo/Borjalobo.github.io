<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <title>Document</title>
</head>

<body>
    <div style="background-color: #07204A; margin-top: 150px; border-radius: 10px;" class="container">
        <p>hola</p>
        <div id="partes" class='card mb-1'>
            <p class="fs-3">Iniciar un parte</p>
            <div id="abrirParte" class='card mb-1'>
                <button type="button" class="btn btn-primary btn-block" id='iniciar'
                    style="background-color: red;">Iniciar
                    Parte üßæ</button>
                <div id="zonaFirma" class='zonas'>

                    <div id='firma' class="fondoFirma"></div>
                    <input type="text" id='firmaInput' hidden>
                    <div id="opcionesFirma" class='m-1'>
                        <div class="row">
                            <div class="col-4">
                                <div class="btn btn-sm btn-secondary" id="borraFirma">üöÆ Borrar</div>
                            </div>
                            <div class="col-8">
                                <div class="btn btn-success d-md-block" id="enviar">Enviar</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="cerrarParte" class='card mb-1'>
                <button type="button" class="btn btn-danger btn-block" id='parar'>Cerrar Parte üèÉ‚Äç‚ôÄÔ∏è</button>
            </div>
        </div>


        <div id="break" class='card mb-1'>
            <p class="fs-3">Break</p>
            <button type="button" class="btn btn-outline-danger btn-block mb-1" id='break'>Parada parcial <span
                    class="fas fa-utensils"></span></button>
        </div>

        <div id="nfc" class='card mb-1'>
            <button type="button" class="btn btn-primary btn-block" id='iniciar'>Registrar el dispositivo para
                NFC</button>
        </div>

        <!-- Botones para leer y escribir -->
        <button onclick="startNFCReading()">Iniciar Lectura NFC</button>
        <button onclick="writeNFCData()">Escribir Datos NFC</button>

        <!-- Espacio para mostrar resultados -->
        <div id="result"></div>

    </div>

    <script>
        $(document).ready(function () {

            /*if ('NDEFReader' in window) {
                // La API NFC est√° disponible en este navegador
                alert("La API NFC est√° disponible en este navegador ahora");
                alert("Datos del m√≥vil:\nN√∫mero de serie: " + serialNumber + "\nMensaje: " + JSON.stringify(message));

                // Obtener la informaci√≥n del dispositivo NFC
                const reader = new NDEFReader();
                reader.write("hola");

                reader.scan();

                // Escuchar eventos de lectura NFC
                reader.addEventListener('reading', async ({ message, serialNumber }) => {
                    // Aqu√≠ se pueden manejar los datos le√≠dos
                    // Por ejemplo, podr√≠as enviarlos a una base de datos

                    // Mostrar alert con los datos del m√≥vil
                    alert("Datos del m√≥vil:\nN√∫mero de serie: " + serialNumber + "\nMensaje: " + JSON.stringify(message));
                });

            } else {
                // La API NFC no est√° disponible en este navegador
                alert("La API NFC no est√° disponible en este navegador");
                alert("Datos del m√≥vil:\nN√∫mero de serie: " + serialNumber + "\nMensaje: " + JSON.stringify(message));

            }*/

            async function startNFCReading() {
                try {
                    // Comprobar si el navegador es compatible con la API NFC
                    if ('NDEFReader' in window) {
                        // La API NFC est√° disponible en este navegador
                        const reader = new NDEFReader();

                        // Escuchar eventos de lectura NFC
                        reader.addEventListener('reading', ({ message, serialNumber }) => {
                            // Mostrar los datos le√≠dos
                            //document.getElementById('result').innerHTML = `<p>Datos le√≠dos:</p><pre>${JSON.stringify(message, null, 2)}</pre>`;
                            document.getElementById('result').innerHTML = "hola";
                        });

                        // Iniciar la lectura NFC
                        await reader.scan();

                        // Mostrar mensaje de inicio de lectura
                        document.getElementById('result').innerHTML = '<p>Escaneando etiquetas NFC...</p>';
                    } else {
                        // La API NFC no est√° disponible en este navegador
                        document.getElementById('result').innerHTML = '<p>La API NFC no est√° disponible en este navegador</p>';
                    }
                } catch (error) {
                    console.error('Error al iniciar la lectura NFC:', error);
                    document.getElementById('result').innerHTML = '<p>Error al iniciar la lectura NFC</p>';
                }
            }

            // Funci√≥n para escribir datos NFC (dummy)
            function writeNFCData() {
                try {
                    // Simplemente muestra un mensaje de que la escritura no est√° implementada en este ejemplo
                    document.getElementById('result').innerHTML = '<p>La escritura NFC no est√° implementada en este ejemplo</p>';
                } catch (error) {
                    console.error('Error al escribir datos NFC:', error);
                    document.getElementById('result').innerHTML = '<p>Error al escribir datos NFC</p>';
                }
            }




        });





    </script>

</body>

</html>